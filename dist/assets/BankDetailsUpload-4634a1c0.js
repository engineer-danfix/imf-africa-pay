import{u as P,j as e}from"./index-17c20209.js";import{u as S,d as E,r as o}from"./vendor-4034f138.js";import{m as p}from"./framer-1863aff2.js";const m={bankName:"Zenith Bank",accountName:"FIRST INTL GOSPEL MINISTERS FORUM",accountNumber:"1223664859"},F="https://imf-africa-pay-klzv.onrender.com",B=5,D=["image/jpeg","image/png","application/pdf"],G=()=>{var g;const f=S(),y=E(),{showToast:r}=P(),s=(g=f.state)==null?void 0:g.plan,[u,h]=o.useState(null),[c,N]=o.useState(""),[d,k]=o.useState(""),[i,x]=o.useState(!1),[b,l]=o.useState(null),j=a=>/\S+@\S+\.\S+/.test(a),w=a=>{if(a.target.files&&a.target.files[0]){const t=a.target.files[0];if(!D.includes(t.type)){l("Only JPG, PNG, or PDF files are allowed."),r("Only JPG, PNG, or PDF files are allowed.","error");return}if(t.size>B*1024*1024){l("File size must be less than 5MB."),r("File size must be less than 5MB.","error");return}h(t),l(null)}},v=async a=>{if(a.preventDefault(),!u){l("Please upload your payment receipt."),r("Please upload your payment receipt.","error");return}if(!c||!d){l("Please enter your name and email."),r("Please enter your name and email.","error");return}if(!j(d)){l("Please enter a valid email address."),r("Please enter a valid email address.","error");return}x(!0),l(null);try{const t=new FormData;t.append("receipt",u),t.append("name",c),t.append("email",d),t.append("amount",((s==null?void 0:s.amount)||0).toString()),t.append("serviceType",(s==null?void 0:s.name)||""),t.append("reference",`IMF-${Date.now()}`);const n=await(await fetch(`${F}/api/send-transfer-receipt`,{method:"POST",body:t})).json();if(!n.success)throw r(n.error||"Failed to submit payment","error"),new Error(n.error||"Failed to submit payment");n.emailSuccess?r("Payment submitted successfully and confirmation email sent!","success"):n.emailError?r(`Payment submitted successfully but email notification failed: ${n.emailError}`,"error"):r("Payment submitted successfully!","success"),y("/success",{state:{plan:s}})}catch(t){l(t.message||"Failed to upload receipt. Please try again."),r(t.message||"Failed to upload receipt. Please try again.","error")}finally{x(!1)}};return e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-blue-100 to-green-100 dark:from-gray-800 dark:to-gray-900 py-12 px-4",children:e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-full max-w-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2 text-blue-700 dark:text-blue-400",children:"Bank Transfer Details"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Please transfer the amount to the account details below and upload your payment receipt."})]}),e.jsxs("div",{className:"mb-8 p-5 bg-blue-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("h2",{className:"text-lg font-bold mb-4 text-center text-gray-800 dark:text-white",children:"Bank Account Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Bank Name:"}),e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white",children:m.bankName})]}),e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Account Name:"}),e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white",children:m.accountName})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Account Number:"}),e.jsx("span",{className:"font-mono text-lg font-bold text-blue-700 dark:text-blue-400",children:m.accountNumber})]})]})]}),s&&e.jsxs("div",{className:"mb-6 p-3 bg-green-50 dark:bg-gray-700 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Selected Plan:"}),e.jsxs("div",{className:"font-bold text-base text-green-700 dark:text-green-400",children:[s.name," (",s.price,")"]})]}),e.jsxs("form",{onSubmit:v,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-semibold mb-2 text-sm",children:"Your Name:"}),e.jsx("input",{type:"text",value:c,onChange:a=>N(a.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2.5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Enter your full name",disabled:i,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-semibold mb-2 text-sm",children:"Your Email:"}),e.jsx("input",{type:"email",value:d,onChange:a=>k(a.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2.5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Enter your email address",disabled:i,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-semibold mb-2 text-sm",children:"Upload Payment Receipt:"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2.5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white file:mr-3 file:py-1.5 file:px-3 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900 dark:file:text-blue-100 dark:hover:file:bg-blue-800 cursor-pointer text-sm",disabled:i,required:!0})}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Accepted formats: JPG, PNG, or PDF. Maximum file size: 5MB."})]}),b&&e.jsx("div",{className:"text-red-600 dark:text-red-400 text-xs bg-red-50 dark:bg-red-900/20 p-2.5 rounded-lg",children:b}),e.jsx(p.button,{type:"submit",whileTap:{scale:.98},className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2.5 px-4 rounded-lg shadow transition-all mt-2 flex items-center justify-center disabled:opacity-70 text-sm",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),"Processing..."]}):"Submit Payment"})]})]})})};export{G as default};
