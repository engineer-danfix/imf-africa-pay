import{j as e,m as p}from"./framer-Dl8yYWxu.js";import{u as S,d as E,a as o}from"./vendor-BsBYTaxR.js";import{u as F}from"./index-r_BTAIai.js";const x={bankName:"Zenith Bank",accountName:"FIRST INTL GOSPEL MINISTERS FORUM",accountNumber:"1223664859"},D="http://localhost:3000",B=5,T=["image/jpeg","image/png","application/pdf"],L=()=>{const y=S(),f=E(),{showToast:a}=F(),l=y.state?.plan,[c,h]=o.useState(null),[m,N]=o.useState(""),[d,k]=o.useState(""),[n,b]=o.useState(!1),[g,r]=o.useState(null),j=t=>/\S+@\S+\.\S+/.test(t),w=t=>{if(t.target.files&&t.target.files[0]){const s=t.target.files[0];if(!T.includes(s.type)){r("Only JPG, PNG, or PDF files are allowed."),a("Only JPG, PNG, or PDF files are allowed.","error");return}if(s.size>B*1024*1024){r("File size must be less than 5MB."),a("File size must be less than 5MB.","error");return}h(s),r(null)}},v=async t=>{if(t.preventDefault(),!c){r("Please upload your payment receipt."),a("Please upload your payment receipt.","error");return}if(!m||!d){r("Please enter your name and email."),a("Please enter your name and email.","error");return}if(!j(d)){r("Please enter a valid email address."),a("Please enter a valid email address.","error");return}b(!0),r(null);try{const s={name:m,email:d,amount:l?.amount||0,serviceType:l?.name||""},P=`IMF-${Date.now()}`,i=new FormData;i.append("receipt",c),i.append("paymentData",JSON.stringify(s)),i.append("paymentReference",P),i.append("fileName",c.name);const u=await(await fetch(`${D}/api/send-transfer-receipt`,{method:"POST",body:i})).json();if(!u.success)throw a(u.error||"Failed to submit payment","error"),new Error(u.error||"Failed to submit payment");a("Payment submitted successfully!","success"),f("/success",{state:{plan:l}})}catch(s){r(s.message||"Failed to upload receipt. Please try again."),a(s.message||"Failed to upload receipt. Please try again.","error")}finally{b(!1)}};return e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-blue-100 to-green-100 dark:from-gray-800 dark:to-gray-900 py-12 px-4",children:e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-full max-w-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2 text-blue-700 dark:text-blue-400",children:"Bank Transfer Details"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Please transfer the amount to the account details below and upload your payment receipt."})]}),e.jsxs("div",{className:"mb-8 p-5 bg-blue-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("h2",{className:"text-lg font-bold mb-4 text-center text-gray-800 dark:text-white",children:"Bank Account Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Bank Name:"}),e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white",children:x.bankName})]}),e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Account Name:"}),e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white",children:x.accountName})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Account Number:"}),e.jsx("span",{className:"font-mono text-lg font-bold text-blue-700 dark:text-blue-400",children:x.accountNumber})]})]})]}),l&&e.jsxs("div",{className:"mb-6 p-3 bg-green-50 dark:bg-gray-700 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Selected Plan:"}),e.jsxs("div",{className:"font-bold text-base text-green-700 dark:text-green-400",children:[l.name," (",l.price,")"]})]}),e.jsxs("form",{onSubmit:v,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-semibold mb-2 text-sm",children:"Your Name:"}),e.jsx("input",{type:"text",value:m,onChange:t=>N(t.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2.5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Enter your full name",disabled:n,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-semibold mb-2 text-sm",children:"Your Email:"}),e.jsx("input",{type:"email",value:d,onChange:t=>k(t.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2.5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Enter your email address",disabled:n,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-semibold mb-2 text-sm",children:"Upload Payment Receipt:"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2.5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white file:mr-3 file:py-1.5 file:px-3 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900 dark:file:text-blue-100 dark:hover:file:bg-blue-800 cursor-pointer text-sm",disabled:n,required:!0})}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Accepted formats: JPG, PNG, or PDF. Maximum file size: 5MB."})]}),g&&e.jsx("div",{className:"text-red-600 dark:text-red-400 text-xs bg-red-50 dark:bg-red-900/20 p-2.5 rounded-lg",children:g}),e.jsx(p.button,{type:"submit",whileTap:{scale:.98},className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2.5 px-4 rounded-lg shadow transition-all mt-2 flex items-center justify-center disabled:opacity-70 text-sm",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),"Processing..."]}):"Submit Payment"})]})]})})};export{L as default};
